(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9e8e38c"],{"7b55":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"dhb-space"},[r("div",{staticClass:"formBox"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("div",{staticClass:"w500"},[r("el-form-item",{attrs:{label:"视频标题",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"视频作者",prop:"author"}},[r("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),r("el-form-item",{attrs:{label:"视频简介",prop:"desc"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("el-form-item",{attrs:{label:"biliurl",prop:"biliurl"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.biliurl,callback:function(t){e.$set(e.form,"biliurl",t)},expression:"form.biliurl"}})],1)],1),r("el-form-item",{attrs:{label:"标签",prop:"tag"}},[r("el-checkbox-group",{attrs:{size:"small"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}},[r("el-checkbox-button",{key:"百合",attrs:{label:"0"}},[e._v("百合")]),r("el-checkbox-button",{key:"励志",attrs:{label:"1"}},[e._v("励志")]),r("el-checkbox-button",{key:"搞笑",attrs:{label:"2"}},[e._v("搞笑")]),r("el-checkbox-button",{key:"后宫",attrs:{label:"3"}},[e._v("后宫")]),r("el-checkbox-button",{key:"原创",attrs:{label:"4"}},[e._v("原创")]),r("el-checkbox-button",{key:"漫画改",attrs:{label:"5"}},[e._v("漫画改")]),r("el-checkbox-button",{key:"小说改",attrs:{label:"6"}},[e._v("小说改")]),r("el-checkbox-button",{key:"游戏改",attrs:{label:"7"}},[e._v("游戏改")]),r("el-checkbox-button",{key:"热血",attrs:{label:"8"}},[e._v("热血")]),r("el-checkbox-button",{key:"奇幻",attrs:{label:"9"}},[e._v("奇幻")]),r("el-checkbox-button",{key:"战斗",attrs:{label:"10"}},[e._v("战斗")]),r("el-checkbox-button",{key:"日常",attrs:{label:"11"}},[e._v("日常")]),r("el-checkbox-button",{key:"科幻",attrs:{label:"12"}},[e._v("科幻")]),r("el-checkbox-button",{key:"萌系",attrs:{label:"13"}},[e._v("萌系")]),r("el-checkbox-button",{key:"治愈",attrs:{label:"14"}},[e._v("治愈")]),r("el-checkbox-button",{key:"校园",attrs:{label:"15"}},[e._v("校园")]),r("el-checkbox-button",{key:"泡面",attrs:{label:"16"}},[e._v("泡面")]),r("el-checkbox-button",{key:"恋爱",attrs:{label:"17"}},[e._v("恋爱")]),r("el-checkbox-button",{key:"少女",attrs:{label:"18"}},[e._v("少女")]),r("el-checkbox-button",{key:"魔法",attrs:{label:"19"}},[e._v("魔法")]),r("el-checkbox-button",{key:"机战",attrs:{label:"20"}},[e._v("机战")]),r("el-checkbox-button",{key:"致郁",attrs:{label:"21"}},[e._v("致郁")]),r("el-checkbox-button",{key:"神魔",attrs:{label:"22"}},[e._v("神魔")]),r("el-checkbox-button",{key:"运动",attrs:{label:"23"}},[e._v("运动")]),r("el-checkbox-button",{key:"音乐",attrs:{label:"24"}},[e._v("音乐")]),r("el-checkbox-button",{key:"推理",attrs:{label:"25"}},[e._v("推理")]),r("el-checkbox-button",{key:"社团",attrs:{label:"26"}},[e._v("社团")]),r("el-checkbox-button",{key:"智斗",attrs:{label:"27"}},[e._v("智斗")]),r("el-checkbox-button",{key:"催泪",attrs:{label:"28"}},[e._v("催泪")]),r("el-checkbox-button",{key:"装逼",attrs:{label:"29"}},[e._v("装逼")]),r("el-checkbox-button",{key:"偶像",attrs:{label:"30"}},[e._v("偶像")]),r("el-checkbox-button",{key:"职场",attrs:{label:"31"}},[e._v("职场")]),r("el-checkbox-button",{key:"冒险",attrs:{label:"32"}},[e._v("冒险")])],1)],1),r("el-form-item",{attrs:{label:"代理",prop:"proxy"}},[r("el-checkbox-group",{attrs:{size:"small"},model:{value:e.form.proxy,callback:function(t){e.$set(e.form,"proxy",t)},expression:"form.proxy"}},[r("el-checkbox-button",{attrs:{label:"bilibili"}},[e._v("bilibili")]),r("el-checkbox-button",{attrs:{label:"iqiyi"}},[e._v("爱奇艺")]),r("el-checkbox-button",{attrs:{label:"youku"}},[e._v("优酷")]),r("el-checkbox-button",{attrs:{label:"tencent"}},[e._v("腾讯")]),r("el-checkbox-button",{attrs:{label:"other"}},[e._v("其他")])],1)],1),r("el-form-item",{attrs:{label:"播放时间",prop:"startTime"}},[r("el-date-picker",{attrs:{placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),r("el-form-item",{attrs:{label:"所属分类",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-option",{attrs:{label:"下季资讯",value:"1"}}),r("el-option",{attrs:{label:"本季推荐",value:"2"}}),r("el-option",{attrs:{label:"部长最爱",value:"3"}})],1)],1),r("el-form-item",{attrs:{label:"是否banner",prop:"isbanner"}},[r("el-switch",{model:{value:e.form.isbanner,callback:function(t){e.$set(e.form,"isbanner",t)},expression:"form.isbanner"}})],1),r("el-form-item",{attrs:{label:"是否热推",prop:"isrecommend"}},[r("el-switch",{model:{value:e.form.isrecommend,callback:function(t){e.$set(e.form,"isrecommend",t)},expression:"form.isrecommend"}})],1),r("el-form-item",{attrs:{label:"封面图",prop:"cover"}},[r("el-upload",{ref:"cover",attrs:{action:e.ossInfo.host,data:e.ossInfo,"list-type":"picture-card","before-upload":e.beforeUpload,"on-success":e.uploadSuccess,"on-remove":e.removeChange,limit:1,"file-list":e.coverUrl}},[r("i",{staticClass:"el-icon-plus"})])],1),e.form.isbanner?r("el-form-item",{attrs:{label:"banner图",prop:"banner"}},[r("el-upload",{ref:"banner",attrs:{action:e.ossInfo.host,data:e.ossInfo,"list-type":"picture-card","before-upload":e.beforeUpload,"on-success":e.uploadSuccess2,"on-remove":e.removeChange2,limit:1,"file-list":e.bannerUrl}},[r("i",{staticClass:"el-icon-plus"})])],1):e._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.isAdd?"创建":"编辑")+"视频")]),r("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)])])},o=[],l=(r("7f7f"),r("96cf"),r("3b8d")),s={name:"addVideo",props:["videodata","isAdd"],data:function(){return{ossInfo:{host:"#"},fileList:[],coverUrl:[],bannerUrl:[],form:{title:"",desc:"",tag:[],type:"",author:"",biliurl:"",isrecommend:!1,isbanner:!1,cover:"",banner:"",proxy:[],startTime:""},rules:{title:[{required:!0,message:"啊，忘了标题了",trigger:"blur"}],biliurl:[{required:!0,message:"啊，忘了biliurl了",trigger:"blur"}],author:[{required:!0,message:"啊，忘了作者了",trigger:"blur"}],desc:[{required:!0,message:"啊，忘了介绍了",trigger:"blur"}],tag:[{required:!0,message:"啊，忘了标签了",trigger:"change"}],type:[{required:!0,message:"啊，忘了分类了",trigger:"change"}],proxy:[{required:!0,message:"啊，忘了代理商了",trigger:"blur"}]}}},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.isAdd||this.appendForm();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{appendForm:function(){for(var e in this.form)this.form[e]=this.videodata[e];this.videodata.cover&&(this.coverUrl[0]={url:this.videodata.cover}),this.videodata.banner&&(this.bannerUrl[0]={url:this.videodata.banner})},setVideoInfo:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isAdd||(this.form.pid=this.videodata._id),!this.isAdd){e.next=7;break}return e.next=4,axios.post("/setVideoInfo",this.form);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,axios.post("updateVideoInfo",this.form);case 9:e.t0=e.sent;case 10:t=e.t0,r=t.data,0==r.status?(this.$message.success(r.message),this.resetForm(),this.$emit("update")):this.$message.error(r.message);case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),uploadSuccess:function(e){var t=e.data;this.form.cover=t.filename},uploadSuccess2:function(e){var t=e.data;this.form.banner=t.filename},removeChange:function(e,t){this.form.cover=""},removeChange2:function(e,t){this.form.banner=""},beforeUpload:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var r,a,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.size/1024/1024<2,r){e.next=5;break}return this.$message.error("上传封面图片大小不能超过 2MB!"),e.abrupt("return",Promise.reject());case 5:return e.next=7,axios.get("/ossSign");case 7:a=e.sent,o=a.data,l=o.data,l.key=l.dirPath+l.key+t.name,this.ossInfo=o.data,e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:case"end":return e.stop()}},e,this,[[0,14]])}));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.setVideoInfo()})},resetForm:function(){this.$refs["form"].resetFields()}}},n=s,i=(r("8361"),r("2877")),c=Object(i["a"])(n,a,o,!1,null,"c236fd5c",null);t["default"]=c.exports},"7f7f":function(e,t,r){var a=r("86cc").f,o=Function.prototype,l=/^\s*function ([^ (]*)/,s="name";s in o||r("9e1e")&&a(o,s,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(e){return""}}})},8361:function(e,t,r){"use strict";var a=r("af24"),o=r.n(a);o.a},af24:function(e,t,r){}}]);
//# sourceMappingURL=chunk-e9e8e38c.67809be7.js.map