(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-206c2630","chunk-e9e8e38c"],{1936:function(e,t,a){e.exports=a.p+"img/banner.26508859.png"},3882:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{overflow:"hidden"}},[r("div",{staticClass:"dmb-banner-link",style:{backgroundImage:"url("+a("1936")+")"}})]),r("div",{staticClass:"dhb-space"},[r("div",{staticClass:"table-box"},[r("div",{staticStyle:{"text-align":"right","margin-bottom":"20px"}},[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.editVideoInfo(!0)}}},[e._v("新增")])],1),r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"box-card"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.videoList}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"table-expand"},[r("ul",[r("li",{staticClass:"desc"},[e._v("简介："+e._s(t.row.desc))]),r("li",[e._v("标签：\n                    "),e._l(t.row.tag,function(t,a){return r("el-tag",{key:a,staticStyle:{"margin-right":"10px"},attrs:{type:"danger"}},[e._v(e._s(e._f("tag")(t)))])}),e._v("喜欢：\n                    "),r("el-button",{attrs:{type:"success",plain:"",size:"small"}},[e._v("\n                      "+e._s(t.row.like)+"\n                      "),r("i",{staticClass:"el-icon-star-off el-icon--right"})]),e._v("\n                     播放厂商：\n                     "),e._l(t.row.proxy,function(t,a){return r("el-tag",{key:a,staticStyle:{"margin-right":"10px"},attrs:{type:"danger"}},[e._v(e._s(t))])})],2),r("li",{staticClass:"biliurl"},[e._v(e._s(t.row.biliurl))])])])]}}])}),r("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":"","min-width":"300"}}),r("el-table-column",{attrs:{label:"原作者",prop:"author","show-overflow-tooltip":"",width:"120"}}),r("el-table-column",{attrs:{label:"播放时间",prop:"startTime",width:"180"}}),r("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"180"}}),r("el-table-column",{attrs:{label:"更新时间",prop:"loastTime",width:"180"}}),r("el-table-column",{attrs:{label:"封面图",prop:"cover",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{attrs:{src:e.row.cover,width:"40",height:"40",alt:""}})]}}])}),r("el-table-column",{attrs:{label:"banner图",prop:"banner",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{attrs:{src:e.row.banner,width:"40",height:"40",alt:""}})]}}])}),r("el-table-column",{attrs:{label:"分类",prop:"type",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"success"}},[e._v(e._s(e._f("type")(t.row.type)))])]}}])}),r("el-table-column",{attrs:{label:"banner",prop:"isbanner",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.updateVideoInfo(t.row._id,{isbanner:e.videoList[t.$index].isbanner})}},model:{value:e.videoList[t.$index].isbanner,callback:function(a){e.$set(e.videoList[t.$index],"isbanner",a)},expression:"videoList[scope.$index].isbanner"}})]}}])}),r("el-table-column",{attrs:{label:"首推",prop:"isrecommend",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.updateVideoInfo(t.row._id,{isrecommend:e.videoList[t.$index].isrecommend})}},model:{value:e.videoList[t.$index].isrecommend,callback:function(a){e.$set(e.videoList[t.$index],"isrecommend",a)},expression:"videoList[scope.$index].isrecommend"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.editVideoInfo(!1,t.$index)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.removeVideoInfo(t.row._id)}}},[e._v("删除")])]}}])})],1),r("div",{staticStyle:{"margin-top":"20px","text-align":"right"}},[r("el-pagination",{attrs:{background:"","current-page":e.pageCurrent,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)]),e.dialogVisible?r("el-dialog",{attrs:{title:e.isAdd?"新增":"编辑","custom-class":"dialog",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("addVideo",{attrs:{videodata:e.videoData,isAdd:e.isAdd},on:{update:e.getVideoList}})],1):e._e()],1)},o=[],i=a("cebc"),n=(a("96cf"),a("3b8d")),s=a("7b55"),l={name:"space",components:{addVideo:s["default"]},data:function(){return{isAdd:!1,videoData:null,dialogVisible:!1,tableLoading:!1,pageSize:10,pageCurrent:1,total:0,videoList:null}},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getVideoList();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{editVideoInfo:function(e,t){this.dialogVisible=!0,this.isAdd=e,this.videoData=this.videoList[t]},removeVideoInfo:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$confirm("删除嘛，嘿嘿嘿?","我删",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return this.tableLoading=!0,e.next=6,axios.post("removeVideoInfo",{pid:t});case 6:a=e.sent,r=a.data,0==r.status?(this.$message.success(r.message),this.getVideoList()):this.$message.error("删除失败"),this.tableLoading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$message.error("删除失败"),this.tableLoading=!1;case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),updateVideoInfo:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.tableLoading=!0,e.next=4,axios.post("updateVideoInfo",Object(i["a"])({pid:t},a));case 4:r=e.sent,o=r.data,this.tableLoading=!1,0==o.status?(this.$message.success(o.message),this.getVideoList()):this.$message.error("修改失败"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.tableLoading=!1;case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(t,a){return e.apply(this,arguments)}return t}(),getVideoList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogVisible=!1,e.prev=1,this.tableLoading=!0,e.next=5,axios.get("getVideoList",{params:{pageSize:this.pageSize,pageCurrent:this.pageCurrent-1}});case 5:t=e.sent,a=t.data,this.tableLoading=!1,0==a.status&&(this.total=a.data.total,this.videoList=a.data.list),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.tableLoading=!1;case 14:case"end":return e.stop()}},e,this,[[1,11]])}));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.pageSize=e,this.getVideoList()},handleCurrentChange:function(e){this.pageCurrent=e,this.getVideoList()}}},c=l,u=(a("7033"),a("2877")),b=Object(u["a"])(c,r,o,!1,null,"4038c9a2",null);t["default"]=b.exports},7033:function(e,t,a){"use strict";var r=a("b77f"),o=a.n(r);o.a},"7b55":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"dhb-space"},[a("div",{staticClass:"formBox"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("div",{staticClass:"w500"},[a("el-form-item",{attrs:{label:"视频标题",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"视频作者",prop:"author"}},[a("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),a("el-form-item",{attrs:{label:"视频简介",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("el-form-item",{attrs:{label:"biliurl",prop:"biliurl"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.biliurl,callback:function(t){e.$set(e.form,"biliurl",t)},expression:"form.biliurl"}})],1)],1),a("el-form-item",{attrs:{label:"标签",prop:"tag"}},[a("el-checkbox-group",{attrs:{size:"small"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}},[a("el-checkbox-button",{key:"百合",attrs:{label:"0"}},[e._v("百合")]),a("el-checkbox-button",{key:"励志",attrs:{label:"1"}},[e._v("励志")]),a("el-checkbox-button",{key:"搞笑",attrs:{label:"2"}},[e._v("搞笑")]),a("el-checkbox-button",{key:"后宫",attrs:{label:"3"}},[e._v("后宫")]),a("el-checkbox-button",{key:"原创",attrs:{label:"4"}},[e._v("原创")]),a("el-checkbox-button",{key:"漫画改",attrs:{label:"5"}},[e._v("漫画改")]),a("el-checkbox-button",{key:"小说改",attrs:{label:"6"}},[e._v("小说改")]),a("el-checkbox-button",{key:"游戏改",attrs:{label:"7"}},[e._v("游戏改")]),a("el-checkbox-button",{key:"热血",attrs:{label:"8"}},[e._v("热血")]),a("el-checkbox-button",{key:"奇幻",attrs:{label:"9"}},[e._v("奇幻")]),a("el-checkbox-button",{key:"战斗",attrs:{label:"10"}},[e._v("战斗")]),a("el-checkbox-button",{key:"日常",attrs:{label:"11"}},[e._v("日常")]),a("el-checkbox-button",{key:"科幻",attrs:{label:"12"}},[e._v("科幻")]),a("el-checkbox-button",{key:"萌系",attrs:{label:"13"}},[e._v("萌系")]),a("el-checkbox-button",{key:"治愈",attrs:{label:"14"}},[e._v("治愈")]),a("el-checkbox-button",{key:"校园",attrs:{label:"15"}},[e._v("校园")]),a("el-checkbox-button",{key:"泡面",attrs:{label:"16"}},[e._v("泡面")]),a("el-checkbox-button",{key:"恋爱",attrs:{label:"17"}},[e._v("恋爱")]),a("el-checkbox-button",{key:"少女",attrs:{label:"18"}},[e._v("少女")]),a("el-checkbox-button",{key:"魔法",attrs:{label:"19"}},[e._v("魔法")]),a("el-checkbox-button",{key:"机战",attrs:{label:"20"}},[e._v("机战")]),a("el-checkbox-button",{key:"致郁",attrs:{label:"21"}},[e._v("致郁")]),a("el-checkbox-button",{key:"神魔",attrs:{label:"22"}},[e._v("神魔")]),a("el-checkbox-button",{key:"运动",attrs:{label:"23"}},[e._v("运动")]),a("el-checkbox-button",{key:"音乐",attrs:{label:"24"}},[e._v("音乐")]),a("el-checkbox-button",{key:"推理",attrs:{label:"25"}},[e._v("推理")]),a("el-checkbox-button",{key:"社团",attrs:{label:"26"}},[e._v("社团")]),a("el-checkbox-button",{key:"智斗",attrs:{label:"27"}},[e._v("智斗")]),a("el-checkbox-button",{key:"催泪",attrs:{label:"28"}},[e._v("催泪")]),a("el-checkbox-button",{key:"装逼",attrs:{label:"29"}},[e._v("装逼")]),a("el-checkbox-button",{key:"偶像",attrs:{label:"30"}},[e._v("偶像")]),a("el-checkbox-button",{key:"职场",attrs:{label:"31"}},[e._v("职场")]),a("el-checkbox-button",{key:"冒险",attrs:{label:"32"}},[e._v("冒险")])],1)],1),a("el-form-item",{attrs:{label:"代理",prop:"proxy"}},[a("el-checkbox-group",{attrs:{size:"small"},model:{value:e.form.proxy,callback:function(t){e.$set(e.form,"proxy",t)},expression:"form.proxy"}},[a("el-checkbox-button",{attrs:{label:"bilibili"}},[e._v("bilibili")]),a("el-checkbox-button",{attrs:{label:"iqiyi"}},[e._v("爱奇艺")]),a("el-checkbox-button",{attrs:{label:"youku"}},[e._v("优酷")]),a("el-checkbox-button",{attrs:{label:"tencent"}},[e._v("腾讯")]),a("el-checkbox-button",{attrs:{label:"other"}},[e._v("其他")])],1)],1),a("el-form-item",{attrs:{label:"播放时间",prop:"startTime"}},[a("el-date-picker",{attrs:{placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),a("el-form-item",{attrs:{label:"所属分类",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"下季资讯",value:"1"}}),a("el-option",{attrs:{label:"本季推荐",value:"2"}}),a("el-option",{attrs:{label:"部长最爱",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"是否banner",prop:"isbanner"}},[a("el-switch",{model:{value:e.form.isbanner,callback:function(t){e.$set(e.form,"isbanner",t)},expression:"form.isbanner"}})],1),a("el-form-item",{attrs:{label:"是否热推",prop:"isrecommend"}},[a("el-switch",{model:{value:e.form.isrecommend,callback:function(t){e.$set(e.form,"isrecommend",t)},expression:"form.isrecommend"}})],1),a("el-form-item",{attrs:{label:"封面图",prop:"cover"}},[a("el-upload",{ref:"cover",attrs:{action:e.ossInfo.host,data:e.ossInfo,"list-type":"picture-card","before-upload":e.beforeUpload,"on-success":e.uploadSuccess,"on-remove":e.removeChange,limit:1,"file-list":e.coverUrl}},[a("i",{staticClass:"el-icon-plus"})])],1),e.form.isbanner?a("el-form-item",{attrs:{label:"banner图",prop:"banner"}},[a("el-upload",{ref:"banner",attrs:{action:e.ossInfo.host,data:e.ossInfo,"list-type":"picture-card","before-upload":e.beforeUpload,"on-success":e.uploadSuccess2,"on-remove":e.removeChange2,limit:1,"file-list":e.bannerUrl}},[a("i",{staticClass:"el-icon-plus"})])],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.isAdd?"创建":"编辑")+"视频")]),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)])])},o=[],i=(a("7f7f"),a("96cf"),a("3b8d")),n={name:"addVideo",props:["videodata","isAdd"],data:function(){return{ossInfo:{host:"#"},fileList:[],coverUrl:[],bannerUrl:[],form:{title:"",desc:"",tag:[],type:"",author:"",biliurl:"",isrecommend:!1,isbanner:!1,cover:"",banner:"",proxy:[],startTime:""},rules:{title:[{required:!0,message:"啊，忘了标题了",trigger:"blur"}],biliurl:[{required:!0,message:"啊，忘了biliurl了",trigger:"blur"}],author:[{required:!0,message:"啊，忘了作者了",trigger:"blur"}],desc:[{required:!0,message:"啊，忘了介绍了",trigger:"blur"}],tag:[{required:!0,message:"啊，忘了标签了",trigger:"change"}],type:[{required:!0,message:"啊，忘了分类了",trigger:"change"}],proxy:[{required:!0,message:"啊，忘了代理商了",trigger:"blur"}]}}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.isAdd||this.appendForm();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{appendForm:function(){for(var e in this.form)this.form[e]=this.videodata[e];this.videodata.cover&&(this.coverUrl[0]={url:this.videodata.cover}),this.videodata.banner&&(this.bannerUrl[0]={url:this.videodata.banner})},setVideoInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isAdd||(this.form.pid=this.videodata._id),!this.isAdd){e.next=7;break}return e.next=4,axios.post("/setVideoInfo",this.form);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,axios.post("updateVideoInfo",this.form);case 9:e.t0=e.sent;case 10:t=e.t0,a=t.data,0==a.status?(this.$message.success(a.message),this.resetForm(),this.$emit("update")):this.$message.error(a.message);case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),uploadSuccess:function(e){var t=e.data;this.form.cover=t.filename},uploadSuccess2:function(e){var t=e.data;this.form.banner=t.filename},removeChange:function(e,t){this.form.cover=""},removeChange2:function(e,t){this.form.banner=""},beforeUpload:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.size/1024/1024<2,a){e.next=5;break}return this.$message.error("上传封面图片大小不能超过 2MB!"),e.abrupt("return",Promise.reject());case 5:return e.next=7,axios.get("/ossSign");case 7:r=e.sent,o=r.data,i=o.data,i.key=i.dirPath+i.key+t.name,this.ossInfo=o.data,e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:case"end":return e.stop()}},e,this,[[0,14]])}));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.setVideoInfo()})},resetForm:function(){this.$refs["form"].resetFields()}}},s=n,l=(a("8361"),a("2877")),c=Object(l["a"])(s,r,o,!1,null,"c236fd5c",null);t["default"]=c.exports},"7f7f":function(e,t,a){var r=a("86cc").f,o=Function.prototype,i=/^\s*function ([^ (]*)/,n="name";n in o||a("9e1e")&&r(o,n,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},8361:function(e,t,a){"use strict";var r=a("af24"),o=a.n(r);o.a},af24:function(e,t,a){},b77f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-206c2630.ab882110.js.map